doctype html

html
    head
        meta(charset='utf-8')
        title Report Page
        link(rel='stylesheet',type='text/css',href='https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css')
        link(rel='stylesheet',type='text/css',href='css/fontawesome-free/all.min.css')
        link(rel='stylesheet',type='text/css',href='css/dataTables/dataTables.bootstrap4.css')
        link(rel='stylesheet',type='text/css', href='css/shared.css')
        link(rel='stylesheet',type='text/css',href='css/sb-admin.min.css')
        link(rel='stylesheet',type='text/css',href='css/table_brand.css')
        script(src="http://code.jquery.com/jquery-1.9.1.min.js")
        script(src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js")
        script(src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js")
        script(src="js/report_dbmanagement.js" type="text/javascript")
        script.
            window.jQuery || document.write('script(src="js/jquery.js")');
    body
        header.pageheader
            div.pageheader_title
                a(href="/").pageheader_title__anchor KINDER FOOD FINDER
                div.vertical-align
            nav.pageheader_navigationbar
                ul.pageheader_navigationbar__items
                    li.pageheader_navigationbar__item
                        input(id="pageheader_navigationbar__searchbox" type="text" name="SearchBrandName" Placeholder="Search a brand name...")
                        div.vertical-align
                    li.pageheader_navigationbar__item

                    li.pageheader_navigationbar__item
                        a(href="/reset") RESET ACCOUNT
                    li.pageheader_navigationbar__item
                        a(href="/logout") LOGOUT
        div.pagebody
            div.pagebody_navigationbar
                p CONTROL PANEL
                div.pagebody_navigationbar__header
                    a(href="/report") Report
                div.pagebody_navigationbar__header
                    a(href="/importinsertPage") Import/ Insert Data
                div.pagebody_navigationbar__header
                    a(href="/dbmanagement") Update/ Delete Brand
                div(class="pagebody_navigationbar__header")
                    a(href="/store_dbmanagement") Update/ Delete Store
                div(class="pagebody_navigationbar__header")
                    a(href="/publish") Publish
            div.pagebody_mainbody
                h3 Reported stores and brands from users (Waiting for approval from the admin)
                div.card.mb-3
                    div.card-header Reports
                    div.card-body
                        div.table_responsive
                            div#dataTable_wrapper.dataTables_wrapper.dt-boottrap4
                                div.row
                                    div.col-sm-12.col-md-6
                                        div.dataTables_length#dataTable_length
                                            label Show
                                                - var search = searchstring
                                                - if(numPerPage == 25)
                                                    select.custom-select.custom-select-sm.form-control.form-control-sm(name="dataTable_length", aria-controls="dataTable", data-searchstring = search)
                                                        option(value='25' selected="selected") 25
                                                        option(value='50') 50
                                                        option(value='100') 100
                                                        option(value='200') 200
                                                - if(numPerPage == 50)
                                                    select.custom-select.custom-select-sm.form-control.form-control-sm(name="dataTable_length", aria-controls="dataTable", data-searchstring = search)
                                                        option(value='25') 25
                                                        option(value='50' selected="selected") 50
                                                        option(value='100') 100
                                                        option(value='200') 200
                                                - if(numPerPage == 100)
                                                    select.custom-select.custom-select-sm.form-control.form-control-sm(name="dataTable_length", aria-controls="dataTable", data-searchstring = search)
                                                        option(value='25') 25
                                                        option(value='50') 50
                                                        option(value='100' selected="selected") 100
                                                        option(value='200') 200
                                                - if(numPerPage == 200)
                                                    select.custom-select.custom-select-sm.form-control.form-control-sm(name="dataTable_length", aria-controls="dataTable", data-searchstring = search)
                                                        option(value='25') 25
                                                        option(value='50') 50
                                                        option(value='100') 100
                                                        option(value='200' selected="selected") 200
                                            label.deletebutton_selectall.button Select All
                                                input.button_selectall(type='checkbox')
                                                span.checkmark
                                            label.deletebutton_deletemarked(value=id)
                                                svg(xmlns="http://www.w3.org/2000/svg",width="24",height="24",viewBox = "0 0 24 24")
                                                    path(d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z")
                                    div.col-sm-12.col-md-6
                                        div#dataTable_filter.dataTables_filter
                                            input(id="searchInput" class="form-control form-control-sm" type='search', aria-controls='dataTable', placeholder="Search a store name....")
                                            input(id="searchButton" type="button" value="Search")

                                div.row
                                    div.col-sm-12
                                        table.table.table-bordered.dataTable#dataTable(width="100%", cellspacing="0", role="grid" aria-describedby="dataTable_info" style="width: 100%")
                                            thead
                                                tr(role="row")
                                                    - var sort = sortquery
                                                    - var search = searchstring;
                                                    - var perPage = numPerPage;
                                                    if(sort == "Brand1")
                                                        th.sorting.sorting_asc(tabindex="0",
                                                            aria-controls="dataTable",
                                                            rowspan="1",
                                                            colspan="1",
                                                            aria-sort="ascending",
                                                            aria-label="Brand Name: activate to sort column descending",
                                                            style = "width:55px;",
                                                            data-sort ="Brand1m",
                                                            data-search = search,
                                                            data-perPage = perPage) Brand Name
                                                    else if(sort == "Brand1m")
                                                        th.sorting.sorting_desc(tabindex="0",
                                                            aria-controls="dataTable",
                                                            rowspan="1",
                                                            colspan="1",
                                                            aria-sort="ascending",
                                                            aria-label="Brand Name: activate to sort column descending",
                                                            style = "width:55px;",
                                                            data-sort ="Brand1",
                                                            data-search = search,
                                                            data-perPage = perPage) Brand Name
                                                    else
                                                        th.sorting(tabindex="0",
                                                            aria-controls="dataTable",
                                                            rowspan="1",
                                                            colspan="1",
                                                            aria-sort="ascending",
                                                            aria-label="Brand Name: activate to sort column descending",
                                                            style = "width:55px;",
                                                            data-sort ="Brand1",
                                                            data-search = search,
                                                            data-perPage = perPage) Brand Name
                                                    if(sort == "Store1")
                                                        th.sorting.sorting_asc(tabindex="0",
                                                            aria-controls="dataTable",
                                                            rowspan="1",
                                                            colspan="1",
                                                            aria-sort="ascending",
                                                            aria-label="Brand Name: activate to sort column descending",
                                                            style = "width:55px;",
                                                            data-sort ="Store1m",
                                                            data-search = search,
                                                            data-perPage = perPage) Store Name
                                                    else if(sort == "Store1m")
                                                        th.sorting.sorting_desc(tabindex="0",
                                                            aria-controls="dataTable",
                                                            rowspan="1",
                                                            colspan="1",
                                                            aria-sort="ascending",
                                                            aria-label="Brand Name: activate to sort column descending",
                                                            style = "width:55px;",
                                                            data-sort ="Store1",
                                                            data-search = search,
                                                            data-perPage = perPage) Store Name
                                                    else
                                                        th.sorting(tabindex="0",
                                                            aria-controls="dataTable",
                                                            rowspan="1",
                                                            colspan="1",
                                                            aria-sort="ascending",
                                                            aria-label="Brand Name: activate to sort column descending",
                                                            style = "width:55px;",
                                                            data-sort ="Store1",
                                                            data-search = search,
                                                            data-perPage = perPage) Store Name
                                                    if(sort == "StreetAdd1")
                                                        th.sorting.sorting_asc(tabindex="0",
                                                            aria-controls="dataTable",
                                                            rowspan="1",
                                                            colspan="1",
                                                            aria-sort="ascending",
                                                            aria-label="Brand Name: activate to sort column descending",
                                                            style = "width:55px;",
                                                            data-sort ="StreetAdd1m",
                                                            data-search = search,
                                                            data-perPage = perPage) Address
                                                    else if(sort == "StreetAdd1m")
                                                        th.sorting.sorting_desc(tabindex="0",
                                                            aria-controls="dataTable",
                                                            rowspan="1",
                                                            colspan="1",
                                                            aria-sort="ascending",
                                                            aria-label="Brand Name: activate to sort column descending",
                                                            style = "width:55px;",
                                                            data-sort ="StreetAdd1",
                                                            data-search = search,
                                                            data-perPage = perPage) Address
                                                    else
                                                        th.sorting(tabindex="0",
                                                            aria-controls="dataTable",
                                                            rowspan="1",
                                                            colspan="1",
                                                            aria-sort="ascending",
                                                            aria-label="Brand Name: activate to sort column descending",
                                                            style = "width:55px;",
                                                            data-sort = "StreetAdd1",
                                                            data-search = search,
                                                            data-perPage = perPage) Address
                                                    th(tabindex="0",
                                                        rowspan="1",
                                                        colspan="1",
                                                        style = "width:55px;") Email
                                                    th(tabindex="0",
                                                        rowspan="1",
                                                        colspan="1",
                                                        style = "width:55px;") Delete
                                                    th(tabindex="0",
                                                        rowspan="1",
                                                        colspan="1",
                                                        style = "width:55px;") Add report

                                            tfoot
                                                tr
                                                    th(rowspan="1", colspan="1") Brand Name
                                                    th(rowspan="1", colspan="1") Store Name
                                                    th(rowspan="1", colspan="1") Address
                                                    th(rowspan="1", colspan="1") Email
                                                    th(rowspan="1", colspan="1") Delete
                                                    th(rowspan="1", colspan="1") Add report
                                            tbody(id="table_body")
                                                 - for(var i = 0; i < displaydata.length ; i++)
                                                    tr(role="row", class="odd")
                                                        td(data-brandid = displaydata[i].brandId) #{displaydata[i].brandName}
                                                        td #{displaydata[i].storeName}
                                                        td(data-streetAddress = displaydata[i].streetAddress, data-postcode = displaydata[i].postCode, data-state = displaydata[i].state ) #{displaydata[i].streetAddress},#{displaydata[i].postCode}, #{displaydata[i].state}
                                                        // we are here
                                                        - for (var j = 0; j < appuseremail.length ; j++)
                                                            if(displaydata[i].userId == appuseremail[j].userid)
                                                                td
                                                                    div #{appuseremail[j].email}
                                                        td.deletecheckbox
                                                            label.button
                                                                - var id = displaydata[i]._id
                                                                input.accreditationlist_table__Delete(value = id, type='checkbox')
                                                                span.checkmark
                                                        td
                                                            div(data-reportid=displaydata[i]._id).addreport-button Add report
                                div.row
                                    div.col-sm-12.col-md-5
                                        div.dataTables_info(id="datable_info" role="status", aria-live="polite") Showing #{countentries} of #{count}
                                    div.col-sm-12.col-md-7
                                        div.dataTables_paginate.paging_simple_numbers#dataTable_paginate
                                            if(pages > 0)
                                                ul.pagination#pagination
                                                    - var currentPage = parseInt(current);
                                                    - var search = searchstring;
                                                    - var sort = sortquery
                                                    if(current == 1)
                                                        li.pagination_button.page-item.previous#dataTable_previous.disabled
                                                            a.page-link(href="#",aria-controls="dataTable", data-dt-idx="0", tabindex="0", data-search = search, data-sort = sort) Previous
                                                    else
                                                        li.pagination_button.page-item.previous#dataTable_previous
                                                            a.page-link(href="#",aria-controls="dataTable", data-dt-idx="0", tabindex="0", data-search = search, data-sort = sort) Previous
                                                    - var j = ( current > 5 ? current - 4 :1)
                                                    if (j !== 1)
                                                        li.pagination_button.page-item.disabled
                                                            a.page-link(href="#",aria-controls="dataTable", data-dt-idx="0", tabindex="0", data-search = search, data-sort = sort) ...
                                                    - for(; j <= (current + 4) && j <= pages; j++)
                                                        if(j == current)
                                                            li.pagination_button.page-item.active
                                                                a.page-link(href="#",aria-controls="dataTable", data-dt-idx="0", tabindex="0", data-search = search, data-sort = sort) #{j}
                                                        else
                                                            li.pagination_button.page-item
                                                                a.page-link(href="#",aria-controls="dataTable", data-dt-idx="0", tabindex="0", data-search = search, data-sort = sort) #{j}
                                                        if (j == current + 4 && j < pages)
                                                            li.pagination_button.page-item.disabled
                                                                a.page-link(href="#",aria-controls="dataTable", data-dt-idx="0", tabindex="0", data-search = search, data-sort = sort) ...
                                                    if (current == pages)
                                                        li.pagination_button.page-item.next#dataTable_next.disabled
                                                            a.page-link(href="#",aria-controls="dataTable", data-dt-idx="0", tabindex="0", data-search = search, data-sort = sort) Next
                                                    else
                                                        li.pagination_button.page-item.next#dataTable_next
                                                            a.page-link(href="#",aria-controls="dataTable", data-dt-idx="0", tabindex="0", data-search = search, data-sort = sort) Next
    div(class="feature_page_footer" style="text-align:center")
        div(class="bottom_copyright" style="display:inline-block")
            p &copy; 2019 IT Capstone Project - KinderFoodFinder. All rights reserved | Design by Team 2 - COMP5703


    div.modal.fade#exampleModalScrollable(role="dialog",tabindex="-1",aria-hidden="true",)
        div.modal-dialog.modal-dialog-scrollable.modal-lg(role="document")
            div.modal-content
                div.modal-header(data-storeid=storeid)
                    h4.modal-title Add address to the store
                    button.close(type='button', data-dismiss='modal') x
                div.modal-body
                    div.modal-body__store__seventy.modal-body__store__header Store Name (*)
                    div.modal-body__store__thirty.modal-body__store__header.modal-body__store__clickable Postcode (*)
                    div.modal-body__store__seventy.pagebody_inputform__storenameinput.modal-body__store__changeable
                    div.modal-body__store__thirty.pagebody_inputform__storepostcodeinput.modal-body__store__changeable
                    div.modal-body__store__seventy.modal-body__store__header Street Address (*)
                    div.modal-body__store__thirty.modal-body__store__header State
                    div.modal-body__store__seventy.pagebody_inputform__storeaddressinput.modal-body__store__changeable
                    div.modal-body__store__thirty.pagebody_inputform__storestateinput.modal-body__store__changeable
                    input.modal-body__store__fifteen.pagebody_inputform__storesubmit.initiallyhidden(type="button",value="Search address")
                    div.pagebody_inputform__errordialog__store
                    div.modal-body__store__addresslist
                div.modal-footer
                    button.btn.btn-default.modal-adding__Store(type="button") Add
                    button.btn.btn-default(type="button", data-dismiss = "modal") Close




